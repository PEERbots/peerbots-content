"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{1132:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(5666),r=t.n(a),s=t(5893),i=t(4467),c=t(5321),l=t(7294),d=t(1664),o=t(4603);function u(e){var n=e.content,t=e.author,a=e.rating,r=e.tags;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"bg-white shadow-lg rounded p-4 w-72",children:(0,s.jsxs)("div",{className:"space-y-1 w-full",children:[(0,s.jsxs)("div",{className:" flex justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.default,{href:"/content/[contentId]",as:"/content/".concat(n.id),children:(0,s.jsx)("span",{className:"text-gray-900 text-base text-ellipsis",onClick:function(){o.Z.getInstance().logEvent("Clicked Link: Content Card - Name",{"Content ID":n.id,"Content Name":n.name,"Content Author":t.data.name,"Author ID":t.id})},children:n.name})})}),t?(0,s.jsxs)("div",{className:"text-gray-800",children:[(0,s.jsx)(d.default,{href:"/[userName]",as:"/".concat(t.id),children:(0,s.jsx)("span",{onClick:function(){o.Z.getInstance().logEvent("Clicked Link: Content Card - Author",{"Content ID":n.id,"Content Name":n.name,"Content Author":t.data.name,"Author ID":t.id,"Click Source":"Profile Photo"})},children:t.data.photoUrl?(0,s.jsx)("img",{src:t.data.photoUrl,className:"h-8 inline-block rounded-full"}):(0,s.jsx)("img",{src:"profile_pic.png",className:"h-8 inline-block rounded-full"})})}),(0,s.jsx)(d.default,{href:"/[userName]",as:"/".concat(t.id),children:(0,s.jsx)("span",{className:"ml-1 text-xs",onClick:function(){o.Z.getInstance().logEvent("Clicked Link: Content Card - Author",{"Content ID":n.id,"Content Name":n.name,"Content Author":t.data.name,"Author ID":t.id,"Click Source":"Author Name"})},children:t.data.name})})]}):(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{children:a?(0,s.jsx)(s.Fragment,{children:a.nReviews>0?(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{className:"text-accent-hc font-bold px-2 text-base",children:[a.averageRating,(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})]}),(0,s.jsxs)("span",{className:"text-sm",children:["(",a.nReviews," reviews)"]})]}):(0,s.jsx)("span",{className:"text-xs",children:"No reviews yet"})}):(0,s.jsx)("span",{children:"No rating"})}),(0,s.jsx)("div",{className:"text-sm text-gray-600 flex items-center",children:n.trusted?(0,s.jsx)("span",{children:(0,s.jsxs)("svg",{className:"h-6 w-6",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{clipPath:"url(#clip0_3_129)",children:[(0,s.jsx)("path",{d:"M13.2592 14.488C13.2592 15.3856 13.0192 15.5872 12.2768 15.3792C11.5104 15.1648 10.8272 14.7616 10.1456 14.3616C9.46401 13.9616 8.81602 13.5359 8.17281 13.0912C8.12567 13.0485 8.06437 13.0248 8.00078 13.0248C7.93719 13.0248 7.87589 13.0484 7.82881 13.0912C6.80876 13.8157 5.74374 14.4746 4.64001 15.064C4.2822 15.2637 3.89585 15.4072 3.49438 15.4895C3.16157 15.5455 3.00001 15.4319 2.93755 15.0976C2.83677 14.544 2.95193 14.0047 3.04953 13.4672H3.04959C3.25011 12.4197 3.51735 11.3862 3.84959 10.3728C3.89037 10.2898 3.89641 10.1941 3.86641 10.1067C3.83636 10.0193 3.77276 9.94749 3.68958 9.90713C2.64161 9.15995 1.59998 8.40473 0.68958 7.48153C0.456767 7.25851 0.258847 7.0018 0.102393 6.71992C-0.0880201 6.35189 -0.0176067 6.11831 0.348793 5.91992C0.772754 5.71981 1.22786 5.59372 1.69439 5.54711C2.8759 5.38883 4.06719 5.31508 5.2592 5.32632C5.32414 5.33825 5.39117 5.32294 5.4445 5.28387C5.49778 5.24481 5.53263 5.18549 5.54075 5.11991C5.86075 3.94871 6.18075 2.78071 6.74878 1.69751C6.91758 1.33235 7.15935 1.00569 7.45919 0.737515C7.85441 0.417515 8.22081 0.428715 8.59679 0.777515C9.00319 1.15511 9.24961 1.6383 9.47518 2.12951C9.90127 3.09197 10.2402 4.09058 10.488 5.11351C10.4946 5.18404 10.5302 5.24862 10.5864 5.29174C10.6426 5.33487 10.7141 5.35263 10.784 5.3407C12.064 5.36471 13.344 5.39507 14.608 5.5983C14.9413 5.64278 15.2683 5.72601 15.5824 5.84633C16.0336 6.03195 16.104 6.24794 15.856 6.66393C15.6971 6.91647 15.5096 7.15002 15.2976 7.35991C14.3856 8.3071 13.3408 9.09911 12.3024 9.89591C12.2483 9.92669 12.2078 9.97674 12.1891 10.0361C12.1704 10.0955 12.1749 10.1597 12.2016 10.2159C12.5935 11.3322 12.9105 12.4734 13.1504 13.6319C13.2074 13.9143 13.2437 14.2003 13.2592 14.4879L13.2592 14.488Z",fill:"#46D9D9"}),(0,s.jsx)("path",{d:"M7.57728 5.336H8.44928L10.8893 11H9.73728L9.20928 9.704H6.75328L6.24128 11H5.11328L7.57728 5.336ZM8.85728 8.84L7.98528 6.536L7.09728 8.84H8.85728Z",fill:"white"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_3_129",children:(0,s.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})}):(0,s.jsx)("span",{})})]}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"text-gray-700 line-clamp-2",children:n.description}),(0,s.jsx)("p",{className:"font-bold text-dark-primary cursor-pointer",children:(0,s.jsx)("a",{children:"Read more..."})})]}),(0,s.jsx)("div",{children:r&&r.map((function(e){return(0,s.jsx)(d.default,{href:"/tag/[tagId]",as:"/tag/".concat(e.id),children:(0,s.jsx)("span",{style:{background:e.data.color,color:e.data.textColor},className:"rounded-3xl px-2 mx-1 text-xs",children:e.data.name},e.id)},e.id)}))}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-gray-900 text-sm leading-none",children:0==n.price?(0,s.jsx)("span",{className:"uppercase",children:"Free"}):(0,s.jsx)("span",{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n.price)})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"btn-primary",children:"+"})})]})]})})})}function h(e,n,t,a,r,s,i){try{var c=e[s](i),l=c.value}catch(d){return void t(d)}c.done?n(l):Promise.resolve(l).then(a,r)}function x(e){var n=e.content,t=e.children,a=(0,l.useState)([]),d=a[0],o=a[1],x=(0,l.useState)([]),m=x[0],f=x[1],p=(0,l.useState)([]),C=p[0],j=p[1];n.forEach((function(e){e.data.id=e.id}));var g,v=(0,c.ad)(i.Z),w=(g=r().mark((function e(){var t,a,s,i,l,d,u,h,x,m,p,C,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=25;break}return t=n.map((function(e){return e.data.owner.id})),a=(0,c.IO)((0,c.hJ)(v,"users"),(0,c.ar)((0,c.Jm)(),"in",t)),e.next=5,(0,c.PL)(a);case 5:if(s=e.sent,i=s.docs.map((function(e){return{id:e.id,data:e.data()}})),o(i),l=n.map((function(e){return e.data.tags.flat().map((function(e){return e.id}))})).flat(),console.log("All tags",l),!(l.length>0)){e.next=17;break}return d=(0,c.IO)((0,c.hJ)(v,"tags"),(0,c.ar)((0,c.Jm)(),"in",l)),e.next=14,(0,c.PL)(d);case 14:u=e.sent,h=u.docs.map((function(e){return{id:e.id,data:e.data()}})),j(h);case 17:return x=n.map((function(e){return(0,c.JU)((0,c.hJ)(v,"content"),e.id)})),m=(0,c.IO)((0,c.hJ)(v,"reviews"),(0,c.ar)("content","in",x)),e.next=21,(0,c.PL)(m);case 21:p=e.sent,C=p.docs.map((function(e){var n=e.data();return{content:n.content.id,rating:n.rating}})),g=x.map((function(e){var n=C.filter((function(n){return n.content==e.id})),t=n.length;return{contentId:e.id,averageRating:t>0?n.reduce((function(e,n){return e+n.rating}),0):null,nReviews:t}})),f(g);case 25:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var r=g.apply(e,n);function s(e){h(r,t,a,s,i,"next",e)}function i(e){h(r,t,a,s,i,"throw",e)}s(void 0)}))});return(0,l.useEffect)((function(){w()}),[n]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"bg-white shadow-md my-4 mx-2 p-8 rounded w-full",children:[(0,s.jsx)("div",{className:"mb-6",children:t}),(0,s.jsx)("div",{className:"max-w-sm w-full lg:max-w-full lg:flex space-x-8",children:n&&d&&n.map((function(e){return(0,s.jsx)(u,{content:e.data,author:d.filter((function(n){return n.id==e.data.owner.id}))[0],rating:m.filter((function(n){return n.contentId==e.id}))[0],tags:C.filter((function(n){return e.data.tags.map((function(e){return e.id})).includes(n.id)}))},e.id)}))})]})})}}}]);